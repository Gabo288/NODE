<%- include('./partials/_header') %>
<%- include('./partials/_navbar') %>

<div>

    <div class="profile">
        <h1 style="padding: 0 40px;">PERFIL</h1>
        
        <hr style="color: black;">
        <div class="accordion" style="padding: 0 40px;">
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingOne">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#info-general" aria-expanded="false" aria-controls="info-general">
                    Información de Usuario
                  </button>
                </h2>
                <div id="info-general" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                  <div class="accordion-body">
                    <strong>Id Usuario:</strong>
                    <%= sujeto[0].id_us %> <br>
                
                    <strong>Rut:</strong>
                    <%= sujeto[0].rut %> <br>
                
                    <strong>Nombre:</strong>
                    <%= sujeto[0].str_nombre %> <br>
                
                    <strong>Apellido:</strong>
                    <%= sujeto[0].str_ap %> <br>
                
                    <div >
                        <strong>Dirección:</strong>
                        <%= sujeto[0].str_dir %>, <%= sujeto[0].str_co %>, <%= sujeto[0].str_pr %>, <%= sujeto[0].str_re %>
                    </div>
                    <strong>Correo Electrónico:</strong>
                    <%= sujeto[0].mail %> <br>
                    <% if (autoridad>1) { %>
                     
                      <strong>Rol Empresarial:</strong>
                      <%= sujeto[0].rol %> <br>
                      <div style="padding: 0 40px;">
                        
                        <strong>Bodega Asignada:</strong>
                        <%= sujeto[0].str_bo %> - <%= sujeto[0].id_bo %><br>
                        <strong>Direccion y Comuna de la Bodega:</strong>
                        <%= sujeto[0].dir_bo %>,<%=bodegas[sujeto[0].id_bo - 1].str_co %> <br>
                        <strong>Provincia y Region de la Bodega:</strong>
                        <%= bodegas[sujeto[0].id_bo - 1].str_pr %>, <%= bodegas[sujeto[0].id_bo - 1].str_re %> <br>
                        <strong>Ganancias a la Empresa: $</strong>
                        <%= sujeto[0].ganancias %> <br>
                    </div>

                      <strong>Estado Laboral:</strong>
                      <%= sujeto[0].estado %> <br>

                    <% } %>
                    <% if (autoridad==1) { %>
                     <strong>Dinero invertido: $</strong>
                     <%= sujeto[0].ganancias %> <br>
                     <% } %>
                </div>
        
                
                
            </div>
        </div>
    </div>
    
    <hr>
    <h2 style="padding-left: 2.5%;">Editar Información</h2><hr>
        <div class="accordion" style="padding: 0 40px;">
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingOne">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#nuevo-correo" aria-expanded="false" aria-controls="nuevo-correo">
                    <strong>Correo Electrónico:</strong>
                  </button>
                </h2>
                <div id="nuevo-correo" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                  <div class="accordion-body">
                    <form action="perfil/edit/mail" method="post">
                        <input type="email" name="mail" id="mail" value="<%= sujeto[0].mail %>" >
                        <button type="submit" class="btn btn-primary ">Confirmar</button>
                    </form>
                  </div>
                </div>
              </div>
        </div>
       <hr>
       
        <div class="accordion" style="padding: 0 40px;">
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingOne">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#nueva-clave" aria-expanded="false" aria-controls="nueva-clave">
                    <strong>Cambiar Contraseña: </strong>
                  </button>
                </h2>
                <div id="nueva-clave" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                  <div class="accordion-body">
                      <form action="perfil/edit/clave" method="post">
                        <input type="password" name="clave_1" id="clave_1" value="<%= sujeto[0].clave %>">
                        <input type="password" name="clave_2" id="clave_2" placeholder="Confirmar Contraseña">
                        <button type="submit" class="btn btn-primary ">Confirmar</button>
                      </form>
                  </div>
                </div>
              </div>
        </div>
        <hr>
        <div class="accordion" style="padding: 0 40px;">
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingOne">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#nueva-direccion" aria-expanded="false" aria-controls="nueva-direccion">
                      <strong>Cambiar Dirección:</strong>
                  </button>
                </h2>
                <div id="nueva-direccion" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                  <div class="accordion-body">
                      
                      <form action="perfil/edit/direccio" method="post">
              
                          <input type="text" name="str_dir" id="str_dir" value="<%= sujeto[0].str_dir %>">
                          <strong>Comuna de Residencia:</strong>
                              
                          <select name="id_co" id="id_co">
                              <% if (comunas) { %>
                      
                                  <option value=<%=comunas[0].id_co %>>
                                      Act: <%= sujeto[0].str_co %>
                                  </option>
                                  <% for( let i=0; i < comunas.length; i++ ) { %>
                                      <option value=<%=comunas[i].id_co %>>
                                          <%= comunas[i].str_descripcion %>
                                      </option>
                                  <% } %>
              
                              <% } %>
                          </select>
                          <button type="submit" class="btn btn-primary ">Confirmar</button>
                      </form> 
                  </div>
                </div>
              </div>
        </div>

        <hr>
    </div>
    <a class="btn btn-primary form-control" href="/login">Cerrar Sesion</a>
</div>
<div>
</div>
<style>
    .profile {
        border-radius: 15px;
        background: white;
        color: black;
    }

    .profile form {
        padding-left: 5%;
        padding-right: 5%;
        box-sizing: border-box;
    }

    label {
        color: black;
    }
</style>